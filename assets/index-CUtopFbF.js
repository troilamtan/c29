import{S as ge,E as ye,f,s as be}from"./eye-zO7kBF4z.js";import{j as v,e as u,g as e,i as ue,d as ce,r as V,v as ve,A as ke,c as we,a as p,b as g,f as o,t as s,q as Y,u as n,N as pe,h as fe,p as G,F as q,K as De,z as Q,n as T,y as se,s as ie}from"./index-Yj_fYARO.js";const Se={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"};function Me(H,_){return u(),v("svg",Se,[..._[0]||(_[0]=[e("path",{d:"M0 23h24M8 0v23M16 0v23M8 1h8M1 12v11M0 12h7M23 6v17M16 6h8"},null,-1)])])}const Ve={render:Me},Ne={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"};function Te(H,_){return u(),v("svg",Ne,[..._[0]||(_[0]=[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20H6a4 4 0 0 1-4-4V7a4 4 0 0 1 4-4h11a4 4 0 0 1 4 4v3M8 2v2M15 2v2M2 8h19M18.5 15.643l-1.5 1.5"},null,-1),e("circle",{cx:"17",cy:"17",r:"5",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1)])])}const Ce={render:Te},Pe={};function Ue(H,_){return u(),v("div")}const $e=ue(Pe,[["render",Ue]]),Le={class:"fs-12 mb-2 mt-2"},Fe={class:"pa-2"},Ie=ce({__name:"sheet-futures-pnl",setup(H,{expose:_}){const d=V(!1),j=pe(fe.name),D=ve(),c=ke({pnl:"",roi:"",volume:""}),U=V(""),N=()=>{d.value=!1},te=$=>{U.value=$;const a=D.histories[$];c.pnl=String(a?.pnl||""),c.roi=a?.pnl?a.pnl/a.balance*100+"":"",c.volume=a?.volume||"",d.value=!0},B=()=>{let $=parseFloat(c.roi.replace(",",".")),a=parseFloat(c.pnl.replace(",",".")),b=a/$*100;D.histories[U.value]={pnl:a,volume:parseFloat(c.volume),balance:b},D.saveHistories(),d.value=!1};return _({close:N,open:te}),($,a)=>{const b=g("t-input"),R=g("t-divider"),E=g("t-content"),X=g("t-button"),S=g("t-toolbar"),M=g("t-cable"),L=g("t-sheet");return u(),we(L,{rounded:"",placement:"bottom",visible:d.value,background:"var(--toife-color-background)",onDismiss:a[3]||(a[3]=m=>d.value=!1)},{default:p(()=>[o(E,{class:"hs-75 px-2 pt-2 pb-safe"},{default:p(()=>[e("div",Le,"Lịch sử "+s(U.value),1),o(b,{label:"PNL (USD)",modelValue:c.pnl,"onUpdate:modelValue":a[0]||(a[0]=m=>c.pnl=m),placeholder:"Nhập số tiền lời lãi",type:"number"},null,8,["modelValue"]),a[4]||(a[4]=e("span",{class:"color-text-dark fs-08"},"Nhập số lãi ngăn cách bằng dấu . nếu có",-1)),o(R,{class:"my-1"}),o(b,{label:"ROI (%)",modelValue:c.roi,"onUpdate:modelValue":a[1]||(a[1]=m=>c.roi=m),placeholder:"Nhập tỉ lệ lời lãi",type:"number"},null,8,["modelValue"]),a[5]||(a[5]=e("span",{class:"color-text-dark fs-08"},"Nhập tỉ lệ % ngăn cách bằng dấu . nếu có",-1)),o(R,{class:"my-1"}),o(b,{label:"Volume (USDT)",modelValue:c.volume,"onUpdate:modelValue":a[2]||(a[2]=m=>c.volume=m),placeholder:"Nhập volume giao dịch",type:"number"},null,8,["modelValue"])]),_:1}),o(M,{placement:"bottom"},{default:p(()=>[o(S,{size:"75px"},{default:p(()=>[e("div",Fe,[o(X,{onClick:B,color:"warning",block:"",rounded:""},{default:p(()=>[Y(s(n(j)("as_action_save")),1)]),_:1})])]),_:1})]),_:1})]),_:1},8,["visible"])}}}),de=H=>{const _=[],d=new Date;for(let j=0;j<H;j++){const D=new Date;D.setDate(d.getDate()-j);let c=D.getMonth()+1,U=D.getDate(),N=D.getFullYear()+"-"+(c<10?"0":"")+c+"-"+(U<10?"0":"")+U;_.push(N)}return _.reverse()},ze={class:"flex-none d-flex justify-center items-center px-2 hp-100"},Ge={class:"px-2 mt-2"},Ye={class:"d-flex items-center"},je={class:"mt-1"},Be={class:"fs-20 lh-20",style:{"font-weight":"500"}},Ae={key:0},He={class:"fs-10 lh-10",style:{"margin-left":"0.3rem"}},Re={key:0},Ee={class:"d-flex mt-1"},Oe={class:"flex-1 fs-08 color-text-dark"},Ke={class:"flex-1 fs-08 color-text-dark"},qe={class:"flex-1 fs-08 color-text-dark"},We={class:"mt-2"},Je={class:"px-2 mt-1 fs-09"},Qe={class:"d-flex"},Xe={class:"flex-1 text-end"},Ze={class:"d-flex"},et={class:"flex-1 text-end"},tt={class:"d-flex"},lt={class:"flex-1 text-end"},st={key:0},ot={class:"d-flex"},nt={class:"flex-1 text-end"},at={class:"d-flex"},rt={class:"flex-1 text-end"},it={class:"d-flex"},dt={class:"flex-1 text-end"},ut={class:"d-flex"},ct={class:"flex-1 text-end"},vt={class:"d-flex"},pt={class:"flex-1 text-end"},ft={class:"mt-1"},_t={class:"d-flex px-2 mt-2"},mt={class:"flex-1 d-flex items-center justify-end"},ht={class:"schedule"},xt={class:"active"},gt={class:"mt-1 mb-1 text-center d-flex items-center justify-center"},yt={class:"mx-1"},bt={class:"schedule-table px-2"},kt={class:"item"},wt=["onTouchstart","onDblclick"],Dt={class:"d"},St={key:0,class:"r"},Mt={key:1,class:"color-text-dark"},Vt={key:1},Nt={class:"d"},Tt={class:"mt-3 px-2"},Ct={class:"color-text-dark"},Pt=ce({__name:"index",setup(H){const _=pe(fe.name),d=ve(),j=De(),D=V();V();const c=V("usd_m"),U=["usd_m","coin_m"],N=V("7day"),te=["7day","1month","3month","1year","custom"],B=V(!1),$=V("overview"),a=["overview","detail","analyse","deposit"],b=V(new Date().getMonth()+1),R=V(new Date().getFullYear()),E=r=>{let t=null,h=0,x=0,y=0,C=0,k=0,w=0,A=100,I=[];if(r)I=de(r),I.forEach(l=>{if(!d.histories[l]){k++;return}let i=d.histories[l];w+=i.volume||0,i.pnl>0?(h+=i.pnl,y++):i.pnl==0?k++:(x+=i.pnl,C++),t===null&&i.balance&&(t=i.balance)});else for(let l in d.histories)if(d.histories.hasOwnProperty(l)){let i=d.histories[l];w+=i.volume||0,i.pnl>0?(h+=i.pnl,y++):i.pnl==0?k++:(x+=i.pnl,C++),t===null&&i.balance&&(t=i.balance)}return C>0&&(A=y/(y+C)*100),{pnl:h+x,win:h,winCount:y,loss:x*-1,lossCount:C,drawCount:k,volume:w,winRate:A,days:I,roi:t?(h+x)/t*100:0}},X=G(()=>{if(N.value=="7day")return 7;if(N.value=="1month")return 30;if(N.value=="3month")return 90;if(N.value=="1year")return 365}),S=G(()=>{let r=b.value,t=R.value,h=t+"-"+(r<10?"0":"")+r,x=[];const y=de(X.value),C=new Date(t,r-1,1);let k=null,w=null;if(y.length>0){const P=y[0].split("-");w=parseInt(P[0]),k=parseInt(P[1]);const K=y[y.length-1].split("-");parseInt(K[0]),parseInt(K[1])}const A=k!==null&&w!==null&&(w<t||w===t&&k<r),I=new Date,l=I.getMonth()+1,i=I.getFullYear(),he=t<i||t===i&&r<l,xe=new Date(t,r,0).getDate();for(let P=1;P<=xe;P++){const K=new Date(t,r-1,P);let ae=K.getMonth()+1,re=K.getDate();const J=K.getFullYear()+"-"+(ae<10?"0":"")+ae+"-"+(re<10?"0":"")+re;let z;d.histories[J]&&(z={balance:0,pnl:0,roi:0},z.balance=d.histories[J].balance,z.pnl=d.histories[J].pnl,z.balance&&(z.roi=z.pnl/z.balance*100)),x.push({date:P>=10?P:"0"+P,ymd:J,history:z,isActive:y.includes(J)})}return{title:h,startDay:C.getDay(),activeDays:y,days:x,canGoPrev:A,canGoNext:he}}),M=G(()=>E(X.value)),L=G(()=>{let r=d.today.pnl,t=d.today.balance,h=0;return t&&(h=r/t*100),{pnl:r,balance:t,roi:h}}),m=G(()=>E(7)),F=G(()=>E(30)),O=G(()=>E()),oe=V(""),Z=G(()=>{let r=M.value.days,t=oe.value||r[r.length-1],h=0;for(let x of r)if(h+=d.histories?.[x]?.pnl||0,x==oe)break;return{date:t,pnl:h}});let W=null;const le=r=>{D.value.open(r)},ne=r=>{W===null&&(W=setTimeout(()=>{le(r)},500))},ee=()=>{W!==null&&(clearTimeout(W),W=null)},_e=()=>{S.value.canGoPrev&&(b.value===1?(b.value=12,R.value--):b.value--)},me=()=>{S.value.canGoNext&&(b.value===12?(b.value=1,R.value++):b.value++)};return(r,t)=>{const h=g("t-back-button"),x=g("t-cable"),y=g("t-text"),C=g("t-toolbar"),k=g("t-tab"),w=g("t-tabs"),A=g("t-divider"),I=g("t-content");return u(),v(q,null,[o(x,{placement:"top"},{default:p(()=>[o(C,{size:"44px"},{default:p(()=>[o(x,{placement:"left"},{default:p(()=>[o(h,{router:n(j),to:"/"},{default:p(()=>[...t[6]||(t[6]=[e("i",{class:"ri-arrow-left-line fs-13"},null,-1)])]),_:1},8,["router"])]),_:1}),o(y,{size:"large",class:"d-flex items-center justify-center"},{default:p(()=>[...t[7]||(t[7]=[Y("PnL Hợp đồng tương lai ",-1),e("i",{class:"ri-arrow-down-s-fill fs-13"},null,-1)])]),_:1}),o(x,{placement:"right",class:"hp-100"},{default:p(()=>[e("div",ze,[o(n(ge),{style:{width:"1.3rem"}})])]),_:1})]),_:1})]),_:1}),o(I,{class:"hp-100"},{default:p(()=>[o(w,{variant:"border-under",class:"px-2 category-tabs",color:"warning",size:"standard",modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=l=>c.value=l),border:15},{default:p(()=>[(u(),v(q,null,Q(U,l=>o(k,{value:l,key:l,disabled:!0},{default:p(()=>[Y(s(n(_)(`as_tag_${l}`)),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),o(A),e("div",Ge,[e("div",Ye,[t[8]||(t[8]=Y("PNL của hôm nay ",-1)),o(n(ye),{class:"ml-1 color-text-dark"})]),e("div",je,[e("span",{class:T(["d-inline-flex items-end",{"color-success":L.value.pnl>0,"color-danger":L.value.pnl<0}])},[e("span",Be,[L.value.pnl>0?(u(),v("span",Ae,"+")):se("",!0),Y(s(n(f)(L.value.roi,{digits:[2,2]}))+"% ",1)]),e("span",He,[L.value.pnl>0?(u(),v("span",Re,"+")):se("",!0),Y(s(n(f)(L.value.pnl,{digits:[2,2]}))+" USD",1)])],2)]),e("div",Ee,[e("div",Oe,[t[9]||(t[9]=e("div",{class:"mb-1"},"PNL trong 7 ngày",-1)),e("div",{class:T(["pnl",{"color-success":m.value.pnl>0,"color-danger":m.value.pnl<0}])},s(m.value.pnl>0?"+":"")+s(n(f)(m.value.roi,{digits:[2,2]}))+"%",3),e("div",{class:T(["roi",{"color-success":m.value.pnl>0,"color-danger":m.value.pnl<0}])},s(m.value.pnl>0?"+":"")+s(n(f)(m.value.pnl,{digits:[2,2]}))+" USD",3)]),e("div",Ke,[t[10]||(t[10]=e("div",{class:"mb-1"},"PNL trong 30 Ngày",-1)),e("div",{class:T(["pnl",{"color-success":F.value.pnl>0,"color-danger":F.value.pnl<0}])},s(F.value.pnl>0?"+":"")+s(n(f)(F.value.roi,{digits:[2,2]}))+"%",3),e("div",{class:T(["roi",{"color-success":F.value.pnl>0,"color-danger":F.value.pnl<0}])},s(F.value.pnl>0?"+":"")+s(n(f)(F.value.pnl,{digits:[2,2]}))+" USD",3)]),e("div",qe,[t[11]||(t[11]=e("div",{class:"mb-1"},"PnL trọn đời",-1)),e("div",{class:T(["pnl",{"color-success":O.value.pnl>0,"color-danger":O.value.pnl<0}]),onTouchstart:t[1]||(t[1]=l=>ne("2020-10-10")),onDblclick:t[2]||(t[2]=l=>le("2020-10-10")),onTouchend:ee,onTouchmove:ee},s(O.value.pnl>0?"+":"")+s(n(f)(O.value.pnl,{digits:[2,2]})),35),e("div",{class:T(["roi",{"color-success":O.value.pnl>0,"color-danger":O.value.pnl<0}])},"USD",2)])])]),o(A,{class:"mt-2"}),e("div",We,[o(w,{class:"px-3",variant:"tag",modelValue:N.value,"onUpdate:modelValue":t[3]||(t[3]=l=>N.value=l),color:"var(--toife-color-surface)",size:"small",margin:[5,-5]},{default:p(()=>[(u(),v(q,null,Q(te,l=>o(k,{key:l,value:l},{default:p(()=>[Y(s(n(_)("fhis_tab_time_"+l)),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),e("div",Je,[e("div",Qe,[t[12]||(t[12]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Tổng lợi nhuận")],-1)),e("div",Xe,s(n(f)(M.value.win,{digits:[2,2]}))+" USD",1)]),e("div",Ze,[t[13]||(t[13]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Tổng lỗ")],-1)),e("div",et,s(n(f)(M.value.loss,{digits:[2,2]}))+" USD",1)]),e("div",tt,[t[14]||(t[14]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Lãi lỗ ròng")],-1)),e("div",lt,s(n(f)(M.value.pnl,{digits:[2,2]}))+" USD",1)]),B.value?(u(),v("div",st,[e("div",ot,[t[15]||(t[15]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Khối lượng giao dịch")],-1)),e("div",nt,s(n(f)(M.value.volume,{digits:[2,2]})),1)]),e("div",at,[t[16]||(t[16]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Số ngày thắng")],-1)),e("div",rt,s(n(f)(M.value.winCount,{digits:[0,0]}))+" ngày",1)]),e("div",it,[t[17]||(t[17]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Số ngày thua")],-1)),e("div",dt,s(n(f)(M.value.lossCount,{digits:[0,0]}))+" ngày",1)]),e("div",ut,[t[18]||(t[18]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Số ngày hòa vốn")],-1)),e("div",ct,s(n(f)(M.value.drawCount,{digits:[0,0]}))+" ngày",1)]),e("div",vt,[t[19]||(t[19]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Tỉ lệ thắng")],-1)),e("div",pt,s(n(f)(M.value.winRate,{digits:[2,2]}))+"%",1)])])):se("",!0),e("div",{class:"text-center",onClick:t[4]||(t[4]=l=>B.value=!B.value)},[e("i",{class:T([{"ri-arrow-down-s-line":!B.value,"ri-arrow-up-s-line":B.value},"fs-15 color-text-dark"])},null,2)])]),e("div",ft,[o(w,{variant:"border-under",class:"px-2 detail-tabs",color:"warning",size:"standard",modelValue:$.value,"onUpdate:modelValue":t[5]||(t[5]=l=>$.value=l),border:15},{default:p(()=>[(u(),v(q,null,Q(a,l=>o(k,{value:l,key:l,disabled:!0},{default:p(()=>[Y(s(n(_)(`fhis_tab_detail_${l}`)),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),e("div",_t,[t[20]||(t[20]=e("div",{class:"flex-1"},"PNL Hằng ngày",-1)),e("div",mt,[e("div",ht,[e("div",null,[o(n(Ve))]),e("div",xt,[o(n(Ce))])])])]),e("div",gt,[e("div",{onClick:_e,style:ie({cursor:S.value.canGoPrev?"pointer":"not-allowed",opacity:S.value.canGoPrev?1:.3})},[...t[21]||(t[21]=[e("i",{class:"ri-arrow-left-s-fill color-text-dark"},null,-1)])],4),e("div",yt,s(S.value.title),1),e("div",{onClick:me,style:ie({cursor:S.value.canGoNext?"pointer":"not-allowed",opacity:S.value.canGoNext?1:.3})},[...t[22]||(t[22]=[e("i",{class:"ri-arrow-right-s-fill color-text-dark"},null,-1)])],4)]),e("div",bt,[t[23]||(t[23]=e("div",{class:"h"},"S",-1)),t[24]||(t[24]=e("div",{class:"h"},"M",-1)),t[25]||(t[25]=e("div",{class:"h"},"T",-1)),t[26]||(t[26]=e("div",{class:"h"},"W",-1)),t[27]||(t[27]=e("div",{class:"h"},"T",-1)),t[28]||(t[28]=e("div",{class:"h"},"F",-1)),t[29]||(t[29]=e("div",{class:"h"},"S",-1)),(u(!0),v(q,null,Q(S.value.startDay,l=>(u(),v("div"))),256)),(u(!0),v(q,null,Q(S.value.days,l=>(u(),v("div",kt,[l.isActive?(u(),v("div",{key:0,onTouchstart:i=>ne(l.ymd),onDblclick:i=>le(l.ymd),onTouchend:ee,onTouchmove:ee,class:T({"pnl-loss":l.history&&l.history.pnl<0,"pnl-win":l.history&&l.history.pnl>0,inshow:!0})},[e("div",Dt,s(l.date),1),l.history?(u(),v("div",St,s(l.history.pnl>0?"+":"")+s(n(be)(l.history.pnl)),1)):(u(),v("div",Mt,"0"))],42,wt)):(u(),v("div",Vt,[e("div",Nt,s(l.date),1)]))]))),256))])]),e("div",Tt,[t[30]||(t[30]=e("div",null,"PNL Lũy kế",-1)),e("div",Ct,s(Z.value.date),1),e("div",{class:T(["fs-12 mt-1",{"color-danger":Z.value.pnl<0,"color-success":Z.value.pnl>0}])},s(n(f)(Z.value.pnl,{digits:[2,2]}))+" USD",3),e("div",null,[o($e)])])]),_:1}),o(Ie,{ref_key:"pnlSheet",ref:D},null,512)],64)}}}),Lt=ue(Pt,[["__scopeId","data-v-c4aa1b3b"]]);export{Lt as default};
