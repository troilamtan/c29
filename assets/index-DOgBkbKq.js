import{S as re,E as de,f as _,s as ue}from"./eye-D6s7O1FL.js";import{j as v,e as d,g as e,i as se,d as oe,r as L,v as ne,A as ce,c as ve,a as p,b as h,f as o,t as s,q as I,u as n,N as ae,h as ie,p as B,F as O,K as pe,z as W,n as C,y as Z}from"./index-uh-rkuhp.js";const fe={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"};function _e(Y,m){return d(),v("svg",fe,[...m[0]||(m[0]=[e("path",{d:"M0 23h24M8 0v23M16 0v23M8 1h8M1 12v11M0 12h7M23 6v17M16 6h8"},null,-1)])])}const me={render:_e},he={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"};function xe(Y,m){return d(),v("svg",he,[...m[0]||(m[0]=[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20H6a4 4 0 0 1-4-4V7a4 4 0 0 1 4-4h11a4 4 0 0 1 4 4v3M8 2v2M15 2v2M2 8h19M18.5 15.643l-1.5 1.5"},null,-1),e("circle",{cx:"17",cy:"17",r:"5",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1)])])}const ge={render:xe},ye={};function be(Y,m){return d(),v("div")}const ke=se(ye,[["render",be]]),we={class:"fs-12 mb-2 mt-2"},De={class:"pa-2"},Se=oe({__name:"sheet-futures-pnl",setup(Y,{expose:m}){const r=L(!1),H=ae(ie.name),b=ne(),u=ce({pnl:"",roi:"",volume:""}),P=L(""),w=()=>{r.value=!1},Q=F=>{P.value=F;const a=b.histories[F];u.pnl=String(a?.pnl||""),u.roi=a?.pnl?a.pnl/a.balance*100+"":"",u.volume=a?.volume||"",r.value=!0},R=()=>{let F=parseFloat(u.roi.replace(",",".")),a=parseFloat(u.pnl.replace(",",".")),D=a/F*100;b.histories[P.value]={pnl:a,volume:parseFloat(u.volume),balance:D},b.saveHistories(),r.value=!1};return m({close:w,open:Q}),(F,a)=>{const D=h("t-input"),A=h("t-divider"),E=h("t-content"),k=h("t-button"),z=h("t-toolbar"),S=h("t-cable"),V=h("t-sheet");return d(),ve(V,{rounded:"",placement:"bottom",visible:r.value,background:"var(--toife-color-background)",onDismiss:a[3]||(a[3]=g=>r.value=!1)},{default:p(()=>[o(E,{class:"hs-75 px-2 pt-2 pb-safe"},{default:p(()=>[e("div",we,"Lịch sử "+s(P.value),1),o(D,{label:"PNL (USD)",modelValue:u.pnl,"onUpdate:modelValue":a[0]||(a[0]=g=>u.pnl=g),placeholder:"Nhập số tiền lời lãi",type:"number"},null,8,["modelValue"]),a[4]||(a[4]=e("span",{class:"color-text-dark fs-08"},"Nhập số lãi ngăn cách bằng dấu . nếu có",-1)),o(A,{class:"my-1"}),o(D,{label:"ROI (%)",modelValue:u.roi,"onUpdate:modelValue":a[1]||(a[1]=g=>u.roi=g),placeholder:"Nhập tỉ lệ lời lãi",type:"number"},null,8,["modelValue"]),a[5]||(a[5]=e("span",{class:"color-text-dark fs-08"},"Nhập tỉ lệ % ngăn cách bằng dấu . nếu có",-1)),o(A,{class:"my-1"}),o(D,{label:"Volume (USDT)",modelValue:u.volume,"onUpdate:modelValue":a[2]||(a[2]=g=>u.volume=g),placeholder:"Nhập volume giao dịch",type:"number"},null,8,["modelValue"])]),_:1}),o(S,{placement:"bottom"},{default:p(()=>[o(z,{size:"75px"},{default:p(()=>[e("div",De,[o(k,{onClick:R,color:"warning",block:"",rounded:""},{default:p(()=>[I(s(n(H)("as_action_save")),1)]),_:1})])]),_:1})]),_:1})]),_:1},8,["visible"])}}}),le=Y=>{const m=[],r=new Date;for(let H=0;H<Y;H++){const b=new Date;b.setDate(r.getDate()-H);let u=b.getMonth()+1,P=b.getDate(),w=b.getFullYear()+"-"+(u<10?"0":"")+u+"-"+(P<10?"0":"")+P;m.push(w)}return m.reverse()},Ve={class:"flex-none d-flex justify-center items-center px-2 hp-100"},Te={class:"px-2 mt-2"},Me={class:"d-flex items-center"},Ne={class:"mt-1"},Ce={class:"fs-20 lh-20",style:{"font-weight":"500"}},Ue={key:0},$e={class:"fs-10 lh-10",style:{"margin-left":"0.3rem"}},Le={key:0},Pe={class:"d-flex mt-1"},Fe={class:"flex-1 fs-08 color-text-dark"},ze={class:"flex-1 fs-08 color-text-dark"},je={class:"flex-1 fs-08 color-text-dark"},Be={class:"mt-2"},Ie={class:"px-2 mt-1 fs-09"},He={class:"d-flex"},Re={class:"flex-1 text-end"},Ye={class:"d-flex"},Ee={class:"flex-1 text-end"},Oe={class:"d-flex"},Ae={class:"flex-1 text-end"},Ke={key:0},qe={class:"d-flex"},We={class:"flex-1 text-end"},Ge={class:"d-flex"},Je={class:"flex-1 text-end"},Qe={class:"d-flex"},Xe={class:"flex-1 text-end"},Ze={class:"d-flex"},et={class:"flex-1 text-end"},tt={class:"d-flex"},lt={class:"flex-1 text-end"},st={class:"mt-1"},ot={class:"d-flex px-2 mt-2"},nt={class:"flex-1 d-flex items-center justify-end"},at={class:"schedule"},it={class:"active"},rt={class:"mt-1 mb-1 text-center d-flex items-center justify-center"},dt={class:"mx-1"},ut={class:"schedule-table px-2"},ct={class:"item"},vt=["onTouchstart","onDblclick"],pt={class:"d"},ft={key:0,class:"r"},_t={key:1,class:"color-text-dark"},mt={key:1},ht={class:"d"},xt={class:"mt-3 px-2"},gt={class:"color-text-dark"},yt=oe({__name:"index",setup(Y){const m=ae(ie.name),r=ne(),H=pe(),b=L();L();const u=L("usd_m"),P=["usd_m","coin_m"],w=L("7day"),Q=["7day","1month","3month","1year","custom"],R=L(!1),F=L("overview"),a=["overview","detail","analyse","deposit"],D=c=>{let t=null,f=0,x=0,T=0,M=0,N=0,U=0,y=100,$=[];if(c)$=le(c),$.forEach(l=>{if(!r.histories[l]){N++;return}let i=r.histories[l];U+=i.volume||0,i.pnl>0?(f+=i.pnl,T++):i.pnl==0?N++:(x+=i.pnl,M++),t===null&&i.balance&&(t=i.balance)});else for(let l in r.histories)if(r.histories.hasOwnProperty(l)){let i=r.histories[l];U+=i.volume||0,i.pnl>0?(f+=i.pnl,T++):i.pnl==0?N++:(x+=i.pnl,M++),t===null&&i.balance&&(t=i.balance)}return M>0&&(y=T/(T+M)*100),{pnl:f+x,win:f,winCount:T,loss:x*-1,lossCount:M,drawCount:N,volume:U,winRate:y,days:$,roi:t?(f+x)/t*100:0}},A=B(()=>{if(w.value=="7day")return 7;if(w.value=="1month")return 30;if(w.value=="3month")return 90;if(w.value=="1year")return 365}),E=B(()=>{let c=new Date,t=c.getMonth()+1,f=c.getFullYear(),x=f+"-"+(t<10?"0":"")+t,T=[];const M=le(A.value),N=new Date(c.getFullYear(),t-1,1),U=new Date(f,t,0).getDate();for(let y=1;y<=U;y++){const $=new Date(f,t,y);let l=$.getMonth(),i=$.getDate();const q=$.getFullYear()+"-"+(l<10?"0":"")+l+"-"+(i<10?"0":"")+i;let j;r.histories[q]&&M.includes(q)&&(j={balance:0,pnl:0,roi:0},j.balance=r.histories[q].balance,j.pnl=r.histories[q].pnl,j.balance&&(j.roi=j.pnl/j.balance*100)),T.push({date:y>=10?y:"0"+y,ymd:q,history:j})}return{title:x,startDay:N.getDay(),activeDays:M,days:T}}),k=B(()=>D(A.value)),z=B(()=>{let c=r.today.pnl,t=r.today.balance,f=0;return t&&(f=c/t*100),{pnl:c,balance:t,roi:f}}),S=B(()=>D(7)),V=B(()=>D(30)),g=B(()=>D()),ee=L(""),G=B(()=>{let c=k.value.days,t=ee.value||c[c.length-1],f=0;for(let x of c)if(f+=r.histories?.[x]?.pnl||0,x==ee)break;return{date:t,pnl:f}});let K=null;const X=c=>{b.value.open(c)},te=c=>{K===null&&(K=setTimeout(()=>{X(c)},500))},J=()=>{K!==null&&(clearTimeout(K),K=null)};return(c,t)=>{const f=h("t-back-button"),x=h("t-cable"),T=h("t-text"),M=h("t-toolbar"),N=h("t-tab"),U=h("t-tabs"),y=h("t-divider"),$=h("t-content");return d(),v(O,null,[o(x,{placement:"top"},{default:p(()=>[o(M,{size:"44px"},{default:p(()=>[o(x,{placement:"left"},{default:p(()=>[o(f,{router:n(H),to:"/"},{default:p(()=>[...t[6]||(t[6]=[e("i",{class:"ri-arrow-left-line fs-13"},null,-1)])]),_:1},8,["router"])]),_:1}),o(T,{size:"large",class:"d-flex items-center justify-center"},{default:p(()=>[...t[7]||(t[7]=[I("PnL Hợp đồng tương lai ",-1),e("i",{class:"ri-arrow-down-s-fill fs-13"},null,-1)])]),_:1}),o(x,{placement:"right",class:"hp-100"},{default:p(()=>[e("div",Ve,[o(n(re),{style:{width:"1.3rem"}})])]),_:1})]),_:1})]),_:1}),o($,{class:"hp-100"},{default:p(()=>[o(U,{variant:"border-under",class:"px-2 category-tabs",color:"warning",size:"standard",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l),border:15},{default:p(()=>[(d(),v(O,null,W(P,l=>o(N,{value:l,key:l,disabled:!0},{default:p(()=>[I(s(n(m)(`as_tag_${l}`)),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),o(y),e("div",Te,[e("div",Me,[t[8]||(t[8]=I("PNL của hôm nay ",-1)),o(n(de),{class:"ml-1 color-text-dark"})]),e("div",Ne,[e("span",{class:C(["d-inline-flex items-end",{"color-success":z.value.pnl>0,"color-danger":z.value.pnl<0}])},[e("span",Ce,[z.value.pnl>0?(d(),v("span",Ue,"+")):Z("",!0),I(s(n(_)(z.value.roi,{digits:[2,2]}))+"% ",1)]),e("span",$e,[z.value.pnl>0?(d(),v("span",Le,"+")):Z("",!0),I(s(n(_)(z.value.pnl,{digits:[2,2]}))+" USD",1)])],2)]),e("div",Pe,[e("div",Fe,[t[9]||(t[9]=e("div",{class:"mb-1"},"PNL trong 7 ngày",-1)),e("div",{class:C(["pnl",{"color-success":S.value.pnl>0,"color-danger":S.value.pnl<0}])},s(S.value.pnl>0?"+":"")+s(n(_)(S.value.roi,{digits:[2,2]}))+"%",3),e("div",{class:C(["roi",{"color-success":S.value.pnl>0,"color-danger":S.value.pnl<0}])},s(S.value.pnl>0?"+":"")+s(n(_)(S.value.pnl,{digits:[2,2]}))+" USD",3)]),e("div",ze,[t[10]||(t[10]=e("div",{class:"mb-1"},"PNL trong 30 Ngày",-1)),e("div",{class:C(["pnl",{"color-success":V.value.pnl>0,"color-danger":V.value.pnl<0}])},s(V.value.pnl>0?"+":"")+s(n(_)(V.value.roi,{digits:[2,2]}))+"%",3),e("div",{class:C(["roi",{"color-success":V.value.pnl>0,"color-danger":V.value.pnl<0}])},s(V.value.pnl>0?"+":"")+s(n(_)(V.value.pnl,{digits:[2,2]}))+" USD",3)]),e("div",je,[t[11]||(t[11]=e("div",{class:"mb-1"},"PnL trọn đời",-1)),e("div",{class:C(["pnl",{"color-success":g.value.pnl>0,"color-danger":g.value.pnl<0}]),onTouchstart:t[1]||(t[1]=l=>te("2020-10-10")),onDblclick:t[2]||(t[2]=l=>X("2020-10-10")),onTouchend:J,onTouchmove:J},s(g.value.pnl>0?"+":"")+s(n(_)(g.value.pnl,{digits:[2,2]})),35),e("div",{class:C(["roi",{"color-success":g.value.pnl>0,"color-danger":g.value.pnl<0}])},"USD",2)])])]),o(y,{class:"mt-2"}),e("div",Be,[o(U,{class:"px-3",variant:"tag",modelValue:w.value,"onUpdate:modelValue":t[3]||(t[3]=l=>w.value=l),color:"var(--toife-color-surface)",size:"small",margin:[5,-5]},{default:p(()=>[(d(),v(O,null,W(Q,l=>o(N,{key:l,value:l},{default:p(()=>[I(s(n(m)("fhis_tab_time_"+l)),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),e("div",Ie,[e("div",He,[t[12]||(t[12]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Tổng lợi nhuận")],-1)),e("div",Re,s(n(_)(k.value.win,{digits:[2,2]}))+" USD",1)]),e("div",Ye,[t[13]||(t[13]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Tổng lỗ")],-1)),e("div",Ee,s(n(_)(k.value.loss,{digits:[2,2]}))+" USD",1)]),e("div",Oe,[t[14]||(t[14]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Lãi lỗ ròng")],-1)),e("div",Ae,s(n(_)(k.value.pnl,{digits:[2,2]}))+" USD",1)]),R.value?(d(),v("div",Ke,[e("div",qe,[t[15]||(t[15]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Khối lượng giao dịch")],-1)),e("div",We,s(n(_)(k.value.volume,{digits:[2,2]})),1)]),e("div",Ge,[t[16]||(t[16]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Số ngày thắng")],-1)),e("div",Je,s(n(_)(k.value.winCount,{digits:[0,0]}))+" ngày",1)]),e("div",Qe,[t[17]||(t[17]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Số ngày thua")],-1)),e("div",Xe,s(n(_)(k.value.lossCount,{digits:[0,0]}))+" ngày",1)]),e("div",Ze,[t[18]||(t[18]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Số ngày hòa vốn")],-1)),e("div",et,s(n(_)(k.value.drawCount,{digits:[0,0]}))+" ngày",1)]),e("div",tt,[t[19]||(t[19]=e("div",{class:"flex-1"},[e("span",{class:"help-decoration color-text-dark lh-20"},"Tỉ lệ thắng")],-1)),e("div",lt,s(n(_)(k.value.winRate,{digits:[2,2]}))+"%",1)])])):Z("",!0),e("div",{class:"text-center",onClick:t[4]||(t[4]=l=>R.value=!R.value)},[e("i",{class:C([{"ri-arrow-down-s-line":!R.value,"ri-arrow-up-s-line":R.value},"fs-15 color-text-dark"])},null,2)])]),e("div",st,[o(U,{variant:"border-under",class:"px-2 detail-tabs",color:"warning",size:"standard",modelValue:F.value,"onUpdate:modelValue":t[5]||(t[5]=l=>F.value=l),border:15},{default:p(()=>[(d(),v(O,null,W(a,l=>o(N,{value:l,key:l,disabled:!0},{default:p(()=>[I(s(n(m)(`fhis_tab_detail_${l}`)),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),e("div",ot,[t[20]||(t[20]=e("div",{class:"flex-1"},"PNL Hằng ngày",-1)),e("div",nt,[e("div",at,[e("div",null,[o(n(me))]),e("div",it,[o(n(ge))])])])]),e("div",rt,[t[21]||(t[21]=e("div",null,[e("i",{class:"ri-arrow-left-s-fill color-text-dark"})],-1)),e("div",dt,s(E.value.title),1),t[22]||(t[22]=e("div",null,[e("i",{class:"ri-arrow-right-s-fill color-text-dark"})],-1))]),e("div",ut,[t[23]||(t[23]=e("div",{class:"h"},"S",-1)),t[24]||(t[24]=e("div",{class:"h"},"M",-1)),t[25]||(t[25]=e("div",{class:"h"},"T",-1)),t[26]||(t[26]=e("div",{class:"h"},"W",-1)),t[27]||(t[27]=e("div",{class:"h"},"T",-1)),t[28]||(t[28]=e("div",{class:"h"},"F",-1)),t[29]||(t[29]=e("div",{class:"h"},"S",-1)),(d(!0),v(O,null,W(E.value.startDay,l=>(d(),v("div"))),256)),(d(!0),v(O,null,W(E.value.days,l=>(d(),v("div",ct,[E.value.activeDays.includes(l.ymd)?(d(),v("div",{key:0,onTouchstart:i=>te(l.ymd),onDblclick:i=>X(l.ymd),onTouchend:J,onTouchmove:J,class:C({"pnl-loss":l.history&&l.history.pnl<0,"pnl-win":l.history&&l.history.pnl>0,inshow:!0})},[e("div",pt,s(l.date),1),l.history?(d(),v("div",ft,s(l.history.pnl>0?"+":"")+s(n(ue)(l.history.pnl)),1)):(d(),v("div",_t,"0"))],42,vt)):(d(),v("div",mt,[e("div",ht,s(l.date),1)]))]))),256))])]),e("div",xt,[t[30]||(t[30]=e("div",null,"PNL Lũy kế",-1)),e("div",gt,s(G.value.date),1),e("div",{class:C(["fs-12 mt-1",{"color-danger":G.value.pnl<0,"color-success":G.value.pnl>0}])},s(n(_)(G.value.pnl,{digits:[2,2]}))+" USD",3),e("div",null,[o(ke)])])]),_:1}),o(Se,{ref_key:"pnlSheet",ref:b},null,512)],64)}}}),wt=se(yt,[["__scopeId","data-v-942ff9ef"]]);export{wt as default};
